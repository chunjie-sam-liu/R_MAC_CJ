---
title: "Foundations"
output: html_notebook
---

## Data structures

### Vectors

Basic data structure in R is the vector. Vectors come in two flavours: atomic & list.

1. Type, `typeof()`, what it is.
2. Length, `length()`, how many elements it contains.
3. Attributes, `attributes()`, additional arbitrary metadata.

Type of elements in atomic vector should be the same, whereas the elements of a list can have different types.

> *NB*: `is.vector()` does not test if an object is a vector. Instead it returns `TRUE` only if the object is a vector with no attributes apart from names. Use `is.atomic(x) || is.list(x)` to test if an object is actually a vector.

#### Atomic vectors

1. logical.
2. integer.
3. double.
4. charactor.

5. complex.
6. raw.
```{r}
fn_vector <- function(x){
  print(glue::glue("is.vector  {is.vector(x)}"))
  print(glue::glue("is.atomic {is.atomic(x)}"))
  print(glue::glue("is.list {is.list(x)}"))
  print(glue::glue("type is {typeof(x)}"))
  print(glue::glue("length is {length(x)}"))
  print(glue::glue("attributes are {attributes(x)}"))
}
dbl_var <- c(1, 2.5, 4.5)
fn_vector(dbl_var)
int_var <- c(1L, 2L, 3L)
fn_vector(int_var)
log_var <- c(T,F,T,F)
fn_vector(log_var)
chr_var <- c("these are", "some strings")
fn_vector(chr_var)
```

> `NA` is a logical vector of length 1. Creating `NA` of specific type with `NA_real_` (a double vector), `NA_integer` and `NA_character_`.

#### Types and tests

# Functional programming

## Functional programming

1. anonymous functions
2. closures
3. lists of functions
```{r}
set.seed(1014)
df <- data.frame(replicate(6, sample(c(1:10, -99), 6, rep = TRUE)))
names(df) <- letters[1:6]
df

fix_missing <- function(x) {
  x[x == -99] <- NA
  x
}
lapply(x = df, f = fix_missing)
out <- vector("list" ,length(df))
for ( i in seq_along(df)) {out[[1]] <- f(x[[i]], ...)}


fix_missing <- function(x) {
  x[x == -99] <- NA
  x
}

df[] <- lapply(df, fix_missing)

missing_fixer <- function(na_value) {
  function(x) {
    x[x == na_value] <- NA
    x
  }
}
fix_missing_99 <- missing_fixer(-99)
fix_missing_999 <- missing_fixer(-999)

fix_missing_99(c(-99, -999))
fix_missing_999(c(-99, -999))
```

## Functionals

## Function operators




















